DOR_election_category = {
	DOR_campaign_for_the_great_merchants = {
		icon = GFX_decision_great_merchants
		fire_only_once = yes
		days_remove = 100
		cost = 50
		cancel_if_not_visible = yes
		ai_will_do = {
			factor = 0
		}
		modifier = {
			power_balance_weekly = -0.005
		}
	}
	DOR_campaign_for_the_winelords = {
		icon = GFX_decision_winelords
		fire_only_once = yes
		days_remove = 100
		cost = 50
		cancel_if_not_visible = yes
		ai_will_do = {
			factor = 0
		}
		modifier = {
			power_balance_weekly = 0.005
		}
	}
	distribute_generous_gifts = {
		icon = GFX_decision_great_merchants
		fire_only_once = no
		ai_will_do = {
			factor = 0
		}
		visible = {
			has_completed_focus = DOR_give_generous_gifts
		}
		available = {  }
	}
	DOR_rally_for_lost_provinces = {
		icon = GFX_decision_generic_nationalism
		fire_only_once = yes
		cost = 100
		ai_will_do = {
			factor = 0
		}
		visible = {
			NOT = { has_completed_focus = DOR_reconciliate_with_breakaway_cities }
		}
		available = {
			power_balance_value = {
				id = DOR_election_power_balance
				value > 0.15
			}
		}
		complete_effect = { add_war_support = 0.1 }
	}
	
	##APTITUDE MISSSIONS
	@aptitudeDays = 1000
	aptitude_mission_civs = {
		icon = GFX_decision_eng_ally_imperialist_coup
		fire_only_once = yes
		ai_will_do = { #ASAP
			factor = 10
		}
		days_mission_timeout = 100#@aptitudeDays
		is_good = no
		allowed = { always = no }
		available = { industrial_complex > 14 }
		cancel_trigger = { ##Cancel when election happens
			koldana_aptitude_mission_cancel = yes
		}
		cancel_effect = { koldana_aptitude_mission_cancel_effect = yes }
		complete_effect = { koldana_aptitude_mission_reward = yes }
		timeout_effect = { koldana_aptitude_mission_timeout_effect = yes }
	}
	aptitude_mission_infrastructure = {
		icon = GFX_decision_eng_ally_imperialist_coup
		fire_only_once = yes
		ai_will_do = { #ASAP
			factor = 10
		}
		days_mission_timeout = 100#@aptitudeDays
		is_good = no
		allowed = { always = no }
		available = {
			has_20_core_infrastructure = yes
		}
		cancel_trigger = { ##Cancel when election happens
			koldana_aptitude_mission_cancel = yes
		}
		cancel_effect = { koldana_aptitude_mission_cancel_effect = yes }
		complete_effect = { koldana_aptitude_mission_reward = yes }
		timeout_effect = { koldana_aptitude_mission_timeout_effect = yes }
	}
	aptitude_mission_markets = {
		icon = GFX_decision_eng_ally_imperialist_coup
		fire_only_once = yes
		ai_will_do = { #ASAP
			factor = 10
		}
		days_mission_timeout = 100#@aptitudeDays
		is_good = no
		allowed = { always = no }
		available = {
			market > 5
		}
		cancel_trigger = { ##Cancel when election happens
			koldana_aptitude_mission_cancel = yes
		}
		cancel_effect = { koldana_aptitude_mission_cancel_effect = yes }
		complete_effect = { koldana_aptitude_mission_reward = yes }
		timeout_effect = { koldana_aptitude_mission_timeout_effect = yes }
	}
	aptitude_mission_stability = {
		icon = GFX_decision_eng_ally_imperialist_coup
		fire_only_once = yes
		ai_will_do = { #ASAP
			factor = 10
		}
		days_mission_timeout = 100#@aptitudeDays
		is_good = no
		allowed = { always = no }
		available = {
			has_stability > 0.99
		}
		cancel_trigger = { ##Cancel when election happens
			koldana_aptitude_mission_cancel = yes
		}
		cancel_effect = { koldana_aptitude_mission_cancel_effect = yes }
		complete_effect = { koldana_aptitude_mission_reward = yes }
		timeout_effect = { koldana_aptitude_mission_timeout_effect = yes }
	}
	aptitude_mission_manpower = {
		icon = GFX_decision_eng_ally_imperialist_coup
		fire_only_once = yes
		ai_will_do = { #ASAP
			factor = 10
		}
		days_mission_timeout = 100#@aptitudeDays
		is_good = no
		allowed = { always = no }
		available = {
			has_army_manpower = { size > 199999 }
		}
		cancel_trigger = { ##Cancel when election happens
			koldana_aptitude_mission_cancel = yes
		}
		cancel_effect = { koldana_aptitude_mission_cancel_effect = yes }
		complete_effect = { koldana_aptitude_mission_reward = yes }
		timeout_effect = { koldana_aptitude_mission_timeout_effect = yes }
	}
	aptitude_mission_convoys = {
		icon = GFX_decision_eng_ally_imperialist_coup
		fire_only_once = yes
		ai_will_do = { #ASAP
			factor = 10
		}
		days_mission_timeout = 100#@aptitudeDays
		is_good = no
		allowed = { always = no }
		available = {
			has_100_convoys = yes
		}
		cancel_trigger = { ##Cancel when election happens
			koldana_aptitude_mission_cancel = yes
		}
		cancel_effect = { koldana_aptitude_mission_cancel_effect = yes }
		complete_effect = { koldana_aptitude_mission_reward = yes }
		timeout_effect = { koldana_aptitude_mission_timeout_effect = yes }
	}
}

DOR_great_merchants_category = {
	DOR_the_peoples_army_mission = {
		icon = GFX_decision_generic_nationalism
		fire_only_once = yes
		ai_will_do = { #ASAP
			factor = 10
		}
		days_mission_timeout = 180
		is_good = yes
		allowed = { always = no }
		available = {
			hidden_trigger = { always = no }
		}
		cancel_trigger = {
			has_any_level_demoralized_army = no
		}
		timeout_effect = {
			DOR_increase_army_morale = yes
			if = {
				limit = { has_any_level_demoralized_army = yes }
				activate_mission = DOR_the_peoples_army_mission
			}
		}
	}
}

@guildLoanCG = -0.05
@guildLoanDays = 365
DOR_guilds_category = {
	improve_guild_marketing = {
		icon = GFX_decision_eng_propaganda_campaigns
		fire_only_once = no
		ai_will_do = {
			factor = 0
		}
		visible = { has_completed_focus = DOR_pillars_of_society }
	}
	take_smithing_guild_loan = {
		icon = GFX_decision_smithing_guild_loan
		ai_will_do = {
			factor = 0
		}
		visible = { has_completed_focus = DOR_take_guild_loans }
		days_remove = @guildLoanDays
		modifier = {
			consumer_goods_factor = @guildLoanCG
		}
		remove_effect = {
			if = {
				limit = { capital_scope = { industrial_complex > 0 } }
				capital_scope = {
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
			}
			else = {
				random_controlled_state = {
					limit = { industrial_complex > 0 }
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
			}
		}
	}
}

DOR_foreign_loans_category = {
	take_smithing_guild_loan_foreign = {
		icon = GFX_decision_smithing_guild_loan
		ai_will_do = {
			factor = 0
		}
		days_remove = @guildLoanDays
		modifier = {
			consumer_goods_factor = @guildLoanCG
		}
		complete_effect = {
			add_opinion_modifier = {
				modifier = banking_partners
				target = DOR
			}
			reverse_add_opinion_modifier = {
				modifier = banking_partners
				target = DOR
			}
		}
		remove_effect = {
			if = {
				limit = { capital_scope = { industrial_complex > 0 } }
				capital_scope = {
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
			}
			else = {
				random_controlled_state = {
					limit = { industrial_complex > 0 }
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
			}
			
			remove_opinion_modifier = {
				modifier = banking_partners
				target = DOR
			}
			DOR = {
				remove_opinion_modifier = {
					modifier = banking_partners
					target = ROOT
				}
			}
		}
	}
}

DOR_college_category = {
	@DORCollegeCost = 30
	@DORCollegeDays = 30
	
	upgrade_college_of_philosophy = {
		icon = GFX_decision_SOV_academy_of_sciences
		fire_only_once = no
		cost = @DORCollegeCost
		days_remove = @DORCollegeDays
		visible = {
			OR = {
				has_idea = DOR_college_of_philosophy_1
				has_idea = DOR_college_of_philosophy_2
				has_idea = DOR_college_of_philosophy_3
				has_idea = DOR_college_of_philosophy_4
			}
			has_completed_focus = DOR_expand_the_university
		}
		available = {
			NOT = { has_country_flag = upgrading_university }
		}
		ai_will_do = {
			factor = 0
		}
		complete_effect = {
			set_country_flag = upgrading_university
		}
		remove_effect = {
			DOR_upgrade_college_of_philosophy = yes
			clr_country_flag = upgrading_university
		}
	}
	upgrade_college_of_manners = {
		icon = GFX_decision_SOV_academy_of_sciences
		fire_only_once = no
		cost = @DORCollegeCost
		days_remove = @DORCollegeDays
		visible = {
			OR = {
				has_idea = DOR_college_of_manners_1
				has_idea = DOR_college_of_manners_2
				has_idea = DOR_college_of_manners_3
				has_idea = DOR_college_of_manners_4
			}
			has_completed_focus = DOR_expand_the_university
		}
		available = {
			NOT = { has_country_flag = upgrading_university }
		}
		ai_will_do = {
			factor = 0
		}
		complete_effect = {
			set_country_flag = upgrading_university
		}
		remove_effect = {
			DOR_upgrade_college_of_manners = yes
			clr_country_flag = upgrading_university
		}
	}
	upgrade_college_of_medicine = {
		icon = GFX_decision_SOV_academy_of_sciences
		fire_only_once = no
		cost = @DORCollegeCost
		days_remove = @DORCollegeDays
		visible = {
			OR = {
				has_idea = DOR_college_of_medicine_1
				has_idea = DOR_college_of_medicine_2
				has_idea = DOR_college_of_medicine_3
				has_idea = DOR_college_of_medicine_4
			}
			has_completed_focus = DOR_expand_the_university
		}
		available = {
			NOT = { has_country_flag = upgrading_university }
		}
		ai_will_do = {
			factor = 0
		}
		complete_effect = {
			set_country_flag = upgrading_university
		}
		remove_effect = {
			DOR_upgrade_college_of_medicine = yes
			clr_country_flag = upgrading_university
		}
	}
	upgrade_college_of_tactics = {
		icon = GFX_decision_SOV_academy_of_sciences
		fire_only_once = no
		cost = @DORCollegeCost
		days_remove = @DORCollegeDays
		visible = {
			OR = {
				has_idea = DOR_college_of_tactics_1
				has_idea = DOR_college_of_tactics_2
				has_idea = DOR_college_of_tactics_3
				has_idea = DOR_college_of_tactics_4
			}
			has_completed_focus = DOR_expand_the_university
		}
		available = {
			NOT = { has_country_flag = upgrading_university }
		}
		ai_will_do = {
			factor = 0
		}
		complete_effect = {
			set_country_flag = upgrading_university
		}
		remove_effect = {
			DOR_upgrade_college_of_tactics = yes
			clr_country_flag = upgrading_university
		}
	}
}