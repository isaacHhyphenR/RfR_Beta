is_rhunnic_tag = {
	OR = {
		original_tag = LGA
		original_tag = MED
		original_tag = SAG
		original_tag = SRB
		original_tag = ULG
	}
}

is_rhovanion_tag = {
	custom_trigger_tooltip = {
		tooltip = is_rhovanion_tag
		OR = {
			original_tag = YST
			original_tag = SUN
			original_tag = RIN
			original_tag = RUS
			original_tag = HEH
			original_tag = SEK
		}
	}
}

is_steppe_tag = {
	OR = {
		original_tag = DLP
		original_tag = DYR
		original_tag = KRG
		original_tag = KST
		original_tag = LGR
		original_tag = MAG
		original_tag = RLM
	}
}

is_arnor_tag = {
	OR = {
		original_tag = ART
		original_tag = CAR
		original_tag = RDR
	}
}
is_gondor_tag = {
	OR = {
		original_tag = ANF
		original_tag = GON
		original_tag = ITH
		original_tag = PNG
	}
}

can_celduin_trade = {
	market_capital = yes
}
allowed_celduin_trade = {
	OR = {
		original_tag = ERE
		original_tag = WOD
		original_tag = DAL
		original_tag = DOR
		is_rhovanion_tag = yes
		is_rhunnic_tag = yes
	}
}
market_capital = {
	capital_scope = { market > 0 }
}

calculate_trade_convoy_cost = { #Call where THIS is buyer/seller and ROOT is the other
	set_temp_variable = { root_capital = ROOT.capital }
	set_temp_variable = { route_convoy_cost = root_capital:node_index }
	subtract_from_temp_variable = { route_convoy_cost = capital:node_index }
	if = { #If it's negative, makes it positive
		limit = { check_variable = { route_convoy_cost < 0 } }
		multiply_temp_variable = { route_convoy_cost = -1 }
	}
	##Subtract one so that the origin node doesn't country_event
	subtract_from_temp_variable = { route_convoy_cost = 1 }
	always = yes
}
calculate_celdui_trade_convoy_cost_negative = { #Call where THIS is buyer/seller and ROOT is the other
	calculate_trade_convoy_cost = yes
	multiply_temp_variable = { route_convoy_cost = -1 }
	##Subtract -one so that the origin node doesn't country_event
	subtract_from_temp_variable = { route_convoy_cost = -1 }
}

great_merchants_focus_trigger = {
	NOT = { has_country_flag = elected_winelord }
}
winelords_focus_trigger = {
	NOT = { has_country_flag = elected_great_merchant }
}
burghers_focus_trigger = {
	has_country_flag = elected_great_merchant
}
merchant_houses_focus_trigger = {
	has_country_flag = elected_great_merchant
}
koldana_focus_trigger = {
	has_country_flag = elected_winelord
}
vierling_focus_trigger = {
	has_country_flag = elected_winelord
}

DOR_can_interact_with_guilds = {
}

koldana_aptitude_mission_cancel = {
	NOT = { 
		has_country_leader = {
			character = DOR_hawin_koldana
			ruling_only = yes
		}
	}
}
has_20_core_infrastructure = {
	set_temp_variable = { core_inf = 0 }
	custom_trigger_tooltip = {
		tooltip = has_20_core_infrastructure
		all_core_state = {
			if = {
				limit = { is_controlled_by = ROOT }
				add_to_temp_variable = { core_inf = building_level@infrastructure }
			}
		}
		check_variable = { core_inf > 19 }
	}
}
has_100_convoys = {
	has_equipment = {
		convoy_1 > 99
	}
}
has_50_evil_support = {
	custom_trigger_tooltip = {
		tooltip = has_50_evil_support
		add_to_temp_variable = { evil = party_popularity@opportunism }
		add_to_temp_variable = { evil = party_popularity@conquest }
		add_to_temp_variable = { evil = party_popularity@melkorite }
		check_variable = { evil > 0.5 }
	}
}
has_50_good_support = {
	custom_trigger_tooltip = {
		tooltip = has_50_good_support
		add_to_temp_variable = { good = party_popularity@isolationism }
		add_to_temp_variable = { good = party_popularity@freedom }
		check_variable = { good > 0.5 }
	}
}
has_any_level_demoralized_army = {
	custom_trigger_tooltip = {
		tooltip = has_any_level_demoralized_army
		has_idea_with_trait = demoralized_army_trait
	}
}

can_trade_with_ROOT = {
	NOT = {
		OR = {
			has_war_with = ROOT
			is_embargoing = ROOT
			is_embargoed_by = ROOT
		}
	}
}

has_level_10_university = {
	custom_trigger_tooltip = {
		tooltip = has_level_10_university
		check_variable = { university_size > 9 }
	}
}

is_activated_advisor = { #call in character to check if they have an active role in government
	OR = {
		is_political_advisor = yes
		is_high_command = yes
		is_army_chief = yes
		is_navy_chief = yes
		is_theorist = yes
	}
}

at_least_five_factories_trigger = { #returns true if state has at least 5 civs/mils
	custom_trigger_tooltip = {
		tooltip = at_least_five_factories_trigger
		set_temp_variable = { factories = building_level@arms_factory }
		add_to_temp_variable = { factories = building_level@industrial_complex }
		check_variable = { factories > 4 }
	}
}
at_least_ten_factories_trigger = { #returns true if state has at least 10 civs/mils
	custom_trigger_tooltip = {
		tooltip = at_least_ten_factories_trigger
		set_temp_variable = { factories = building_level@arms_factory }
		add_to_temp_variable = { factories = building_level@industrial_complex }
		check_variable = { factories > 10 }
	}
}

is_republic = { #returns true if the country is one of the revolutionary republics DOR can found
	#has_country_flag = revolutionary_republic
	OR = {
		has_country_leader_ideology = republic_isolationism
		has_country_leader_ideology = republic_freedom
		has_country_leader_ideology = corrupt_republic
		has_country_leader_ideology = plutocracy
	}
}

DOR_has_senate = {
	custom_trigger_tooltip = {
		tooltip = DOR_has_senate
		OR = {
			has_idea = DOR_senate_idea
			has_idea = DOR_senate_republic_idea
		}
	}
}

can_form_sister_republic = { #whether DOR can found a unique sister republic on this country's cores
	OR = {
		original_tag = BER
		original_tag = DAI
		original_tag = DAL
		original_tag = HAR
		original_tag = HIL
		original_tag = HTH
		original_tag = KND
		original_tag = ROH
		original_tag = UMB
		is_arnor_tag = yes
		is_gondor_tag = yes
		is_greater_enedwaith_tag = yes
		is_rhovanion_tag = yes
		is_rhunnic_tag = yes
		is_steppe_tag = yes
	}
}

republican_puppet_trigger = {
	overlord = { is_republic = yes }
	is_republic = yes
}

DOR_guild_loan_visible = {
	if = {
		limit = { original_tag = DOR }
		has_completed_focus = DOR_take_guild_loans
	}
	else = {
		DOR = { has_completed_focus = DOR_loan_to_foreigners }
		NOT = {
			OR = {
				has_war_with = DOR
				is_embargoing = DOR
				is_embargoed_by = DOR
			}
		}
		market_capital = yes
	}
}

allow_influence_rhovanion = {
	OR = {
		is_rhovanion_tag = yes
		original_tag = DOR
		original_tag = DAL
		original_tag = GLD
		is_rhunnic_tag = yes
	}
}
can_influence_rhovanion = {
	is_subject = no
	OR = {
		#is_rhovanion_tag = yes
		original_tag = DOR
		original_tag = DAL
		original_tag = GLD
		is_rhunnic_tag = yes
	}
}

house_vierling_visible = {
	NOT = {
		OR = {
			has_country_flag = defeated_monarchist_plot
			has_country_flag = monarchist_revolt_happened
		}
	}
}
merchant_houses_visible = {
	NOT = {
		has_country_flag = monarchist_revolt
	}
}