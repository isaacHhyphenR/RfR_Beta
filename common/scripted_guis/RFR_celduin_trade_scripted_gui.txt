scripted_gui = {
	celduin_trade_GUI = {
		context_type = player_context
		window_name = "celduin_trade_ui_window"
		parent_window_token = trade_tab
		visible = { can_celduin_trade = yes }
		properties = {
			flag1 = {
				image = "[first_export_flag]"
				frame = var:global.exporter_ideology_array^0
			}
		}
		effects = {
			increase_export_1_click = {
				var:global.exporter_array^0 = {
					#calculate how much actually transfers in this export
					set_temp_variable = { TEMP_export_size = global.export_size }
					clamp_temp_variable = { var = TEMP_export_size max = global.exporter_available_array^0 }
					increase_trade_level = yes
					#updates display
					subtract_from_variable = { global.exporter_available_array^0 = TEMP_export_size }
				}
			}
			decrease_export_1_click = {
				var:global.exporter_array^0 = {
					#calculate how much actually transfers in this export
					set_temp_variable = { TEMP_export_size = global.export_size }
					clamp_temp_variable = { var = TEMP_export_size max = ROOT.wine_imported }
					decrease_trade_level = yes
					#updates display
					add_to_variable = { global.exporter_available_array^0 = TEMP_export_size }
				}
			}
		}
		triggers = {
			increase_export_1_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = cant_import_from_yourself
					NOT = { check_variable = { global.exporter_array^0 = ROOT } }
				}
				custom_trigger_tooltip = {
					tooltip = first_export_wine_remaining_trigger
					check_variable = { global.exporter_available_array^0 > 0 }
				}
				num_of_civilian_factories_available_for_projects > 0
			}
			decrease_export_1_click_enabled = {
				custom_trigger_tooltip = {
					tooltip = cant_import_from_yourself
					NOT = { check_variable = { global.exporter_array^0 = ROOT } }
				}
				custom_trigger_tooltip = {
					tooltip = is_importing_wine
					check_variable = { wine_imported > 0 }
				}
			}
		}
	}
}