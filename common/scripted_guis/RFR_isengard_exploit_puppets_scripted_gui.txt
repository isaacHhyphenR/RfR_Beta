scripted_gui = {

	isengard_exploit_puppets_GUI = {
		context_type = decision_category
		window_name = "isengard_exploit_puppets_ui_window"
		parent_window_token = decision_tab
		@PPcost = 24.9
		triggers = {
			andrast_flag_click_enabled = { NOT = { has_country_flag = exploiting_andrast } isn_has_andrast_subject = yes hidden_trigger = { has_political_power > @PPcost } dockyard > 0 }
			enedwaith_flag_click_enabled = { NOT = { has_country_flag = exploiting_enedwaith } isn_has_enedwaith_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			eregion_flag_click_enabled = { NOT = { has_country_flag = exploiting_eregion } isn_has_eregion_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			druwaith_iaur_flag_click_enabled = { NOT = { has_country_flag = exploiting_druwaith_iaur } isn_has_druwaith_iaur_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			dunland_flag_click_enabled = { NOT = { has_country_flag = exploiting_dunland } isn_has_dunland_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			white_mountains_flag_click_enabled = { NOT = { has_country_flag = exploiting_white_mountains } isn_has_white_mountains_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			anduin_flag_click_enabled = { NOT = { has_country_flag = exploiting_anduin } isn_has_anduin_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			arnor_flag_click_enabled = { NOT = { has_country_flag = exploiting_arnor } isn_has_arnor_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			dale_flag_click_enabled = { NOT = { has_country_flag = exploiting_dale } isn_has_dale_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			dorwinion_flag_click_enabled = { NOT = { has_country_flag = exploiting_dorwinion } isn_has_dorwinion_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			gondor_flag_click_enabled = { NOT = { has_country_flag = exploiting_gondor } isn_has_gondor_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			gundabad_flag_click_enabled = { NOT = { has_country_flag = exploiting_gundabad } isn_has_gundabad_subject = yes hidden_trigger = { has_political_power > @PPcost } rocket_site > 0 }
			erebor_flag_click_enabled = { NOT = { has_country_flag = exploiting_erebor } isn_has_erebor_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			ered_luin_flag_click_enabled = { NOT = { has_country_flag = exploiting_ered_luin } isn_has_ered_luin_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			harad_flag_click_enabled = { NOT = { has_country_flag = exploiting_harad } isn_has_harad_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			khand_flag_click_enabled = { NOT = { has_country_flag = exploiting_khand } isn_has_khand_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			mirkwood_flag_click_enabled = { NOT = { has_country_flag = exploiting_mirkwood } isn_has_mirkwood_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			misty_mountains_flag_click_enabled = { NOT = { has_country_flag = exploiting_misty_mountains } isn_has_misty_mountains_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			mordor_flag_click_enabled = { NOT = { has_country_flag = exploiting_mordor } isn_has_mordor_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			rhun_flag_click_enabled = { NOT = { has_country_flag = exploiting_rhun } isn_has_rhun_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			rohan_flag_click_enabled = { NOT = { has_country_flag = exploiting_rohan } isn_has_rohan_subject = yes hidden_trigger = { has_political_power > @PPcost } }
			umbar_flag_click_enabled = { NOT = { has_country_flag = exploiting_umbar } isn_has_umbar_subject = yes hidden_trigger = { has_political_power > @PPcost } dockyard > 0 }
		}
		effects = {
			andrast_flag_click = { activate_decision = isengard_exploit_andrast_decision }
			enedwaith_flag_click = { activate_decision = isengard_exploit_enedwaith_decision }
			eregion_flag_click = { activate_decision = isengard_exploit_eregion_decision }
			druwaith_iaur_flag_click = { activate_decision = isengard_exploit_druwaith_iaur_decision }
			dunland_flag_click = { activate_decision = isengard_exploit_dunland_decision }
			white_mountains_flag_click = { activate_decision = isengard_exploit_white_mountains_decision }
			anduin_flag_click = { activate_decision = isengard_exploit_anduin_decision }
			arnor_flag_click = { activate_decision = isengard_exploit_arnor_decision }
			dale_flag_click = { activate_decision = isengard_exploit_dale_decision }
			dorwinion_flag_click = { activate_decision = isengard_exploit_dorwinion_decision }
			gondor_flag_click = { activate_decision = isengard_exploit_gondor_decision }
			gundabad_flag_click = { activate_decision = isengard_exploit_gundabad_decision }
			erebor_flag_click = { activate_decision = isengard_exploit_erebor_decision }
			ered_luin_flag_click = { activate_decision = isengard_exploit_ered_luin_decision }
			harad_flag_click = { activate_decision = isengard_exploit_harad_decision }
			khand_flag_click = { activate_decision = isengard_exploit_khand_decision }
			mirkwood_flag_click = { activate_decision = isengard_exploit_mirkwood_decision }
			misty_mountains_flag_click = { activate_decision = isengard_exploit_misty_mountains_decision }
			mordor_flag_click = { activate_decision = isengard_exploit_mordor_decision }
			rhun_flag_click = { activate_decision = isengard_exploit_rhun_decision }
			rohan_flag_click = { activate_decision = isengard_exploit_rohan_decision }
			umbar_flag_click = { activate_decision = isengard_exploit_umbar_decision }
		}
		ai_enabled = {
			original_tag = ISN
		}
		@PP_for_1_exploit = 30
		@PP_for_2_exploit = 105
		@PP_for_3_exploit = 155
		ai_weights = {
			andrast_flag_click = { #food from docks
				ai_will_do = {
					base = 0.8 
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						dockyard < 5
						factor = 0
					}
					modifier = {
						fuel_ratio > 0.8
						factor = 0
					}
					modifier = {
						fuel_ratio < 0.4
						factor = 3
					}
				}
			}
			enedwaith_flag_click = { #lack of resoures
				ai_will_do = {
					base = 1
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = { #if you have everything, no need
						has_resources_in_country = {
							resource = cloth
							amount > 0
						}
						has_resources_in_country = {
							resource = wood
							amount > 0
						}
						has_resources_in_country = {
							resource = iron
							amount > 0
						}
						has_resources_in_country = {
							resource = mounts
							amount > 0
						}
						has_resources_in_country = {
							resource = monsters
							amount > 0
						}
						factor = 0
					}
				}
			}
			eregion_flag_click = { #recon & inititative
				ai_will_do = {
					base = 1.5
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						has_war = no
						factor = 0
					}
					modifier = {
						enemies_strength_ratio < 0.75
						factor = 0.1
					}
					modifier = {
						enemies_strength_ratio < 1.1
						factor = 0.66
					}
					modifier = {
						has_war_with_major = yes
						factor = 1.5
					}
				}
			}
			druwaith_iaur_flag_click = { #fuel gain from food
				ai_will_do = {
					base = 1
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						has_resources_in_country = {
							resource = food
							amount < 10
						}
						factor = 0
					}
					modifier = {
						fuel_ratio > 0.8
						factor = 0
					}
					modifier = {
						fuel_ratio < 0.4
						factor = 3
					}
				}
			}
			dunland_flag_click = { #army xp
				ai_will_do = {
					base = 1.25
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						ai_land_doctrine_finished_trigger = yes
						factor = 0
					}
					modifier = {
						has_army_experience < 50
						factor = 1.25
					}
				}
			}
			white_mountains_flag_click = { #supply consumption
				ai_will_do = {
					base = 0.5
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						has_war = no
						factor = 0.1
					}
					modifier = { #checks if fighting in low supply regions
						any_state = {
							low_supply_state = yes
							ROOT = {
								divisions_in_state = {
									size > 3
									state = PREV
								}
							}
						}
						add = 4
					}
					modifier = {
						has_war_with_major = yes
						factor = 1.25
					}
				}
			}
			anduin_flag_click = { #infantry attack
				ai_will_do = {
					base = 1.51
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						has_war = no
						factor = 0
					}
					modifier = {
						enemies_strength_ratio < 0.75
						factor = 0.1
					}
					modifier = {
						enemies_strength_ratio < 1.1
						factor = 0.66
					}
					modifier = {
						has_war_with_major = yes
						factor = 1.5
					}
				}
			}
			arnor_flag_click = { #resistance target
				ai_will_do = {
					base = 1
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						NOT = { any_controlled_state = { resistance_target > 0 } }
						factor = 0
					}
					modifier = {
						NOT = { any_controlled_state = { resistance_target > 0.15 } }
						factor = 0.5
					}
				}
			}
			dale_flag_click = { #consumer goods
				ai_will_do = {
					base = 1.5
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						check_variable = { modifier@consumer_goods_factor < 0.1 }
						factor = 0.5
					}
					modifier = {
						check_variable = { modifier@consumer_goods_factor < 0.01 }
						factor = 0
					}
				}
			}
			dorwinion_flag_click = { #trade opinion factor
				ai_will_do = {
					base = 0.5
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						has_idea = free_trade_isengard
						factor = 1.5
					}
					modifier = {
						has_idea = closed_economy_isengard
						factor = 0
					}
				}
			}
			gondor_flag_click = { #subject autonomy
				ai_will_do = {
					base = 1
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						num_subjects < 1
						factor = 0
					}
					modifier = {
						NOT = { any_subject_country = { compare_autonomy_progress_ratio > 0.1 } }
						factor = 0.1
					}
					modifier = {
						num_subjects > 4
						factor = 2
					}
					modifier = {
						any_subject_country = { compare_autonomy_progress_ratio > 0.6 }
						factor = 2
					}
				}
			}
			gundabad_flag_click = { #siege artillery attack
				ai_will_do = {
					base = 0.8
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						has_war = no
						factor = 0
					}
					modifier = {
						NOT = { any_enemy_country = { bunker > 5 } }
						factor = 0.1
					}
					modifier = {
						has_war_with_major = yes
						factor = 1.5
					}
				}
			}
			erebor_flag_click = { #entrenchment
				ai_will_do = {
					base = 1
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						has_war = no
						factor = 0
					}
					modifier = {
						enemies_strength_ratio < 0.75
						factor = 0
					}
					modifier = {
						enemies_strength_ratio < 1.1
						factor = 0.66
					}
					modifier = {
						has_war_with_major = yes
						factor = 1.5
					}
				}
			}
			ered_luin_flag_click = { #resource gain
				ai_will_do = {
					base = 1.15
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = { #if you have everything, no need
						has_resources_in_country = {
							resource = cloth
							amount > 2
						}
						has_resources_in_country = {
							resource = wood
							amount > 2
						}
						has_resources_in_country = {
							resource = iron
							amount > 2
						}
						has_resources_in_country = {
							resource = mounts
							amount > 2
						}
						has_resources_in_country = {
							resource = monsters
							amount > 2
						}
						factor = 0
					}
				}
			}
			harad_flag_click = { #org regain
				ai_will_do = {
					base = 1.5
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						has_war = no
						factor = 0
					}
					modifier = {
						enemies_strength_ratio < 0.75
						factor = 0.1
					}
					modifier = {
						enemies_strength_ratio < 1.1
						factor = 0.66
					}
					modifier = {
						has_war_with_major = yes
						factor = 1.5
					}
				}
			}
			khand_flag_click = { #trainign time
				ai_will_do = {
					base = 0.4
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
				}
			}
			mirkwood_flag_click = { #decryption
				ai_will_do = {
					base = 0.8
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						has_war = no
						factor = 0
					}
					modifier = {
						enemies_strength_ratio < 0.75
						factor = 0.1
					}
					modifier = {
						enemies_strength_ratio < 1.1
						factor = 0.66
					}
					modifier = {
						has_war_with_major = yes
						factor = 1.5
					}
				}
			}
			misty_mountains_flag_click = { #defence and breakthrough
				ai_will_do = {
					base = 1
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						has_war = no
						factor = 0
					}
					modifier = {
						enemies_strength_ratio < 0.75
						factor = 0.1
					}
					modifier = {
						enemies_strength_ratio < 1.1
						factor = 0.66
					}
					modifier = {
						has_war_with_major = yes
						factor = 1.5
					}
				}
			}
			mordor_flag_click = { #pop growth
				ai_will_do = {
					base = 1
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
				}
			}
			rhun_flag_click = { #supply range
				ai_will_do = {
					base = 0.5
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						has_war = no
						factor = 0.1
					}
					modifier = { #checks if fighting in low supply regions
						any_state = {
							low_supply_state = yes
							ROOT = {
								divisions_in_state = {
									size > 3
									state = PREV
								}
							}
						}
						add = 4
					}
					modifier = {
						has_war_with_major = yes
						factor = 1.5
					}
				}
			}
			rohan_flag_click = { #divisions speed
				ai_will_do = {
					base = 1
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						has_war = no
						factor = 0
					}
					modifier = {
						enemies_strength_ratio < 0.75
						factor = 0.1
					}
					modifier = {
						enemies_strength_ratio < 1.1
						factor = 0.66
					}
					modifier = {
						has_war_with_major = yes
						factor = 1.5
					}
				}
			}
			umbar_flag_click = { #dockyard output
				ai_will_do = {
					base = 0.8
					modifier = { #don't waste all your PP
						OR = {
							has_political_power < @PP_for_1_exploit
							AND = { check_variable = { modifier@num_puppets_exploiting > 0 } has_political_power < @PP_for_2_exploit }
							AND = { check_variable = { modifier@num_puppets_exploiting > 1 } has_political_power < @PP_for_3_exploit }
						}
						factor = 0
					}
					modifier = {
						alliance_naval_strength_ratio < 1
						factor = 2
					}
				}
			}
		}
	}
}

