on_actions = {
	on_startup = {
		effect = { #setup Easterling khanates
			every_country = {
				limit = { OR = { has_idea = easterling_heritage_idea has_idea = steppe_heritage_idea } }
				load_steppe_warband = yes
			}
		}
		effect = { ##setup technology slowers, monster unlockers
			every_country = {
				if = {
					limit = { NOT = { has_tech = metallurgy1 } }
					add_ideas = hidden_metallurgy1
				}
				if = {
					limit = { NOT = { has_tech = metallurgy2 } }
					add_ideas = hidden_metallurgy2
				}
				if = {
					limit = { NOT = { has_tech = metallurgy3 } }
					add_ideas = hidden_metallurgy3
				}
				if = {
					limit = { NOT = { has_tech = metallurgy4 } }
					add_ideas = hidden_metallurgy4
				}
				if = {
					limit = { NOT = { has_tech = carpentry1 } }
					add_ideas = hidden_carpentry1
				}
				if = {
					limit = { NOT = { has_tech = carpentry2 } }
					add_ideas = hidden_carpentry2
				}
				if = {
					limit = { NOT = { has_tech = carpentry3 } }
					add_ideas = hidden_carpentry3
				}
				if = {
					limit = { NOT = { has_tech = carpentry4 } }
					add_ideas = hidden_carpentry4
				}
				if = {
					limit = { NOT = { has_tech = agriculture1 } }
					add_ideas = hidden_agriculture1
				}
				if = {
					limit = { NOT = { has_tech = agriculture2 } }
					add_ideas = hidden_agriculture2
				}
				if = {
					limit = { NOT = { has_tech = agriculture3 } }
					add_ideas = hidden_agriculture3
				}
				if = {
					limit = { NOT = { has_tech = agriculture4 } }
					add_ideas = hidden_agriculture4
				}
				###MONSTERS
				if = {
					limit = { has_idea_with_trait = hidden_troll_tamer_trait }
					set_technology = { hidden_troll_unlocker = 1 popup = no }
				}
				if = {
					limit = { has_idea_with_trait = hidden_mumakil_tamer_trait }
					set_technology = { hidden_mumak_unlocker = 1 popup = no }
				}
			}
		}
		effect = { #party ideology index
			every_possible_country = {
				set_ideology_index = yes
			}
		}
		effect = { #make day 1 wine
			FOR = {
				calculate_all_wine_production = yes
			}
			every_state = {
				limit = { market > 0 }
				daily_prosperity_gain = yes
			}
		}
	}
	on_daily_FOR = { #wine & precious metals gain, prosperity
		effect = {
			calculate_all_wine_production = yes
			#log = "GLOBAL P:[?global.prosperity_per_passthrough] I:[?global.prosperity_per_import] E:[?global.prosperity_per_export]"
			every_state = {
				limit = { market > 0 }
				daily_prosperity_gain = yes
			}
		}
	}
	on_monthly_FOR = { #colony growth
		effect = {
			WLD = {
				every_core_state = {
					limit = { NOT = { is_controlled_by = WLD } }
					set_temp_variable = { growth = controller:modifier@colony_growth_monthly }
					multiply_temp_variable = { growth = controller:modifier@colony_growth_monthly_factor }
					add_manpower = var:growth
					#cost scales by population
					set_variable = { integration_cost = state_population_k }
					divide_variable = { integration_cost = 3 }
					owner = {
						set_variable = { integration_cost = integration_cost }
					}
				}
			}
		}
	}
	on_ruling_party_change = { #party ideology index
		effect = {
			set_ideology_index = yes
		}
	}
	on_state_control_changed = {
		effect = { #exporters
			if = {
				limit = { FROM.FROM = { state = 116 } } #riavod
				set_variable = { global.wine_exporter = ROOT }
			}
			else_if = {
				limit = { FROM.FROM = { state = 101 } } #erebor
				set_variable = { global.gold_exporter = ROOT }
			}
		}
		effect = { #colony uprising
			if = {
				limit = {
					ROOT = { original_tag = WLD }
					FROM = { NOT = { original_tag = WLD } }
					FROM.FROM = { is_core_of = WLD NOT = { has_state_flag = ongoing_incursion } }
				}
				WLD = {
					##send a leader
					if = {
						limit = { has_character = WLD_wilderness1 }
						WLD_wilderness1 = { set_nationality = ROOT }
					}
					else_if = {
						limit = { has_character = WLD_wilderness2 }
						WLD_wilderness2 = { set_nationality = ROOT }
					}
					else_if = {
						limit = { has_character = WLD_wilderness3 }
						WLD_wilderness3 = { set_nationality = ROOT }
					}
					else_if = {
						limit = { has_character = WLD_wilderness4 }
						WLD_wilderness4 = { set_nationality = ROOT }
					}
					else_if = {
						limit = { has_character = WLD_wilderness5 }
						WLD_wilderness5 = { set_nationality = ROOT }
					}
				}
				ROOT = {
					set_cosmetic_tag = WLD_incursion
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 1000
					}
					add_manpower = 2000
					if = {
						limit = { has_character = WLD_wilderness1 }
						WLD_wilderness1 = { promote_character = clanship promote_character = feudalism promote_character = tribalism promote_character = autocracy promote_character = shadow_worship }
					}
					else_if = {
						limit = { has_character = WLD_wilderness2 }
						WLD_wilderness2 = { promote_character = clanship promote_character = feudalism promote_character = tribalism promote_character = autocracy promote_character = shadow_worship }
					}
					else_if = {
						limit = { has_character = WLD_wilderness3 }
						WLD_wilderness3 = { promote_character = clanship promote_character = feudalism promote_character = tribalism promote_character = autocracy promote_character = shadow_worship }
					}
					else_if = {
						limit = { has_character = WLD_wilderness4 }
						WLD_wilderness4 = { promote_character = clanship promote_character = feudalism promote_character = tribalism promote_character = autocracy promote_character = shadow_worship }
					}
					else_if = {
						limit = { has_character = WLD_wilderness5 }
						WLD_wilderness5 = { promote_character = clanship promote_character = feudalism promote_character = tribalism promote_character = autocracy promote_character = shadow_worship }
					}
				}
				FROM.FROM = {
					set_state_flag = ongoing_incursion
					save_event_target_as = incursion_state
				}
				FROM = { #inside to ensure event target carries over
					activate_targeted_decision = {
						target = FROM.FROM
						decision = uprising_in_colony
					}
					news_event = rfr_news.81
				}
			}
		}
	}
}
