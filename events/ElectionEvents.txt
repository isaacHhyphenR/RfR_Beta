add_namespace = rfr_election

country_event = { ##1## Dorwin republic first election
	id = rfr_election.1
	title = rfr_election.1.t
	desc = rfr_election.1.d
	picture = GFX_election
	
	is_triggered_only = yes
	
	option = {
		name = rfr_election.1.a
		ai_chance = {
			base = 1
			modifier = {
				num_subjects > 0
				factor = 1.5
			}
			modifier = {
				any_controlled_state = {
					NOT = { is_core_of = ROOT }
				}
				factor = 1.5
			}
		}
		elect_DOR_thodria_celebcaen = yes
		DOR_first_election_effect = yes
	}
	option = {
		name = rfr_election.1.b
		ai_chance = {
			base = 1
			modifier = {
				has_war = yes
				factor = 1.5
			}
			modifier = {
				surrender_progress > 0.1
				factor = 2
			}
		}
		elect_DOR_skaldir_lendembas = yes
		DOR_first_election_effect = yes
	}
	option = {
		name = rfr_election.1.c
		ai_chance = {
			base = 1
			modifier = {
				any_neighbor_country = {
					THIS_and_PREV_good_vs_evil = yes
					ic_ratio = {
						tag = ROOT
						ratio > 1.1
					}
				}
				factor = 1.5
			}
		}
		elect_DOR_ansovald_gwingalon = yes
		DOR_first_election_effect = yes
	}
	option = {
		name = rfr_election.1.dd
		ai_chance = {
			base = 1
			modifier = {
				has_war = no
				factor = 1.75
			}
		}
		elect_DOR_aregisel_hammdost = yes
		DOR_first_election_effect = yes
	}
}

country_event = { ##2## Dorwin republic election isolationism/freedom
	id = rfr_election.2
	title = rfr_election.2.t
	desc = rfr_election.2.d
	picture = GFX_election
	
	is_triggered_only = yes
	
	option = {
		name = rfr_election.2.a
		ai_chance = {
			base = 1
			modifier = {
				num_subjects > 0
				factor = 1.5
			}
			modifier = {
				any_controlled_state = {
					NOT = { is_core_of = ROOT }
				}
				factor = 1.5
			}
		}
		elect_DOR_thodria_celebcaen = yes
	}
	option = {
		name = rfr_election.2.b
		ai_chance = {
			base = 1
			modifier = {
				has_war = yes
				factor = 1.5
			}
			modifier = {
				surrender_progress > 0.1
				factor = 2
			}
		}
		elect_DOR_skaldir_lendembas = yes
	}
	option = {
		name = rfr_election.2.c
		ai_chance = {
			base = 1
			modifier = {
				any_neighbor_country = {
					THIS_and_PREV_good_vs_evil = yes
					ic_ratio = {
						tag = ROOT
						ratio > 1.1
					}
				}
				factor = 1.5
			}
		}
		elect_DOR_ansovald_gwingalon = yes
	}
	option = {
		name = rfr_election.2.dd
		ai_chance = {
			base = 1
			modifier = {
				has_war = no
				factor = 1.75
			}
		}
		elect_DOR_aregisel_hammdost = yes
	}
}

country_event = { ##3## Dorwin republic election opportunism
	id = rfr_election.3
	title = rfr_election.3.t
	desc = rfr_election.3.d
	picture = GFX_election
	
	is_triggered_only = yes
	
	option = {
		name = rfr_election.3.a
		ai_chance = {
			base = 1
			modifier = { #likely to keep leader
				DOR_thodria_celebcaen = {
					is_country_leader = yes
				}
				factor = 2
			}
			modifier = {
				num_subjects > 0
				factor = 1.5
			}
			modifier = {
				any_controlled_state = {
					NOT = { is_core_of = ROOT }
				}
				factor = 1.5
			}
		}
		if = { ##costs 100 to change leader, boosts freedom
			limit = {
				DOR_thodria_celebcaen = {
					is_country_leader = no
				}
			}
			DOR_elect_different_leader_opportunism = yes
		}
		elect_DOR_thodria_celebcaen = yes
	}
	option = {
		name = rfr_election.3.b
		ai_chance = {
			base = 1
			modifier = {
				DOR_skaldir_lendembas = {
					is_country_leader = yes
				}
				factor = 2
			}
			modifier = {
				has_war = yes
				factor = 1.5
			}
			modifier = {
				surrender_progress > 0.1
				factor = 2
			}
		}
		if = { ##costs 100 to change leader
			limit = {
				DOR_skaldir_lendembas = {
					is_country_leader = no
				}
			}
			DOR_elect_different_leader_opportunism = yes
		}
		elect_DOR_skaldir_lendembas = yes
	}
	option = {
		name = rfr_election.3.c
		ai_chance = {
			base = 1
			modifier = {
				DOR_ansovald_gwingalon = {
					is_country_leader = yes
				}
				factor = 2
			}
			modifier = {
				any_neighbor_country = {
					THIS_and_PREV_good_vs_evil = yes
					ic_ratio = {
						tag = ROOT
						ratio > 1.1
					}
				}
				factor = 1.5
			}
		}
		if = { ##costs 100 to change leader
			limit = {
				DOR_ansovald_gwingalon = {
					is_country_leader = no
				}
			}
			DOR_elect_different_leader_opportunism = yes
		}
		elect_DOR_ansovald_gwingalon = yes
	}
	option = {
		name = rfr_election.3.dd
		ai_chance = {
			base = 1
			modifier = {
				DOR_aregisel_hammdost = {
					is_country_leader = yes
				}
				factor = 2
			}
			modifier = {
				has_war = no
				factor = 1.75
			}
		}
		if = { ##costs 100 to change leader
			limit = {
				DOR_aregisel_hammdost = {
					is_country_leader = no
				}
			}
			DOR_elect_different_leader_opportunism = yes
		}
		elect_DOR_aregisel_hammdost = yes
	}
}


country_event = { ##4## Generic republic election
	id = rfr_election.4
	title = rfr_election.4.t
	desc = rfr_election.4.d
	picture = GFX_election
	
	is_triggered_only = yes
	
	option = { #civ factory candidate
		name = rfr_election.4.a
		ai_chance = {
			base = 2
		}
		random_character = { #promotes to leader, deactivates as advisor
			limit = { has_trait = administrator_pol }
			if = {
				limit = { ROOT = { has_government = isolationism } }
				promote_character = republic_isolationism
				hidden_effect = {
					promote_character = republic_freedom
					promote_character = corrupt_republic
				}
			}
			else_if = {
				limit = { ROOT = { has_government = freedom } }
				promote_character = republic_freedom
				hidden_effect = {
					promote_character = republic_isolationism
					promote_character = corrupt_republic
				}
			}
			else_if = {
				limit = { ROOT = { has_government = opportunism } }
				promote_character = corrupt_republic
				hidden_effect = {
					promote_character = republic_isolationism
					promote_character = republic_freedom
				}
			}
			if = { ##removes from advisor role
				limit = { is_political_advisor = yes }
				ROOT = {
					meta_effect = {
						text = { deactivate_advisor = [ADVISOR] }
						ADVISOR = "[PREV.GetTokenKey]"
					}
				}
			}
		}
	}
	option = { #economics candidate
		name = rfr_election.4.b
		ai_chance = {
			base = 2
		}
		random_character = { #promotes to leader, deactivates as advisor
			limit = { has_trait = economist }
			if = {
				limit = { ROOT = { has_government = isolationism } }
				promote_character = republic_isolationism
				hidden_effect = {
					promote_character = republic_freedom
					promote_character = corrupt_republic
				}
			}
			else_if = {
				limit = { ROOT = { has_government = freedom } }
				promote_character = republic_freedom
				hidden_effect = {
					promote_character = republic_isolationism
					promote_character = corrupt_republic
				}
			}
			else_if = {
				limit = { ROOT = { has_government = opportunism } }
				promote_character = corrupt_republic
				hidden_effect = {
					promote_character = republic_isolationism
					promote_character = republic_freedom
				}
			}
			if = { ##removes from advisor role
				limit = { is_political_advisor = yes }
				ROOT = {
					meta_effect = {
						text = { deactivate_advisor = [ADVISOR] }
						ADVISOR = "[PREV.GetTokenKey]"
					}
				}
			}
		}
	}
	option = { #political candidate
		name = rfr_election.4.c
		ai_chance = {
			base = 2
		}
		random_character = { #promotes to leader, deactivates as advisor
			limit = { has_trait = loremaster }
			if = {
				limit = { ROOT = { has_government = isolationism } }
				promote_character = republic_isolationism
				hidden_effect = {
					promote_character = republic_freedom
					promote_character = corrupt_republic
				}
			}
			else_if = {
				limit = { ROOT = { has_government = freedom } }
				promote_character = republic_freedom
				hidden_effect = {
					promote_character = republic_isolationism
					promote_character = corrupt_republic
				}
			}
			else_if = {
				limit = { ROOT = { has_government = opportunism } }
				promote_character = corrupt_republic
				hidden_effect = {
					promote_character = republic_isolationism
					promote_character = republic_freedom
				}
			}
			if = { ##removes from advisor role
				limit = { is_political_advisor = yes }
				ROOT = {
					meta_effect = {
						text = { deactivate_advisor = [ADVISOR] }
						ADVISOR = "[PREV.GetTokenKey]"
					}
				}
			}
		}
	}
	option = { #military candidate
		name = rfr_election.4.dd
		ai_chance = {
			base = 1
			modifier = {
				has_war = yes
				factor = 2.5
			}
		}
		random_character = { #promotes to leader, deactivates as advisor
			limit = { has_trait = rallying_figurehead }
			if = {
				limit = { ROOT = { has_government = isolationism } }
				promote_character = republic_isolationism
				hidden_effect = {
					promote_character = republic_freedom
					promote_character = corrupt_republic
				}
			}
			else_if = {
				limit = { ROOT = { has_government = freedom } }
				promote_character = republic_freedom
				hidden_effect = {
					promote_character = republic_isolationism
					promote_character = corrupt_republic
				}
			}
			else_if = {
				limit = { ROOT = { has_government = opportunism } }
				promote_character = corrupt_republic
				hidden_effect = {
					promote_character = republic_isolationism
					promote_character = republic_freedom
				}
			}
			if = { ##removes from advisor role
				limit = { is_army_chief = yes }
				ROOT = {
					meta_effect = {
						text = { deactivate_advisor = [ADVISOR] }
						ADVISOR = "[PREV.GetTokenKey]"
					}
				}
			}
		}
	}
}